# Refactoring Batch 3 of 6

> **ðŸ“‹ REFACTORING REQUIREMENT FILE**
> Project: GOAT
> Issues in this batch: 20
> Generated by Vibeman RefactorWizard

---

## Overview

This batch contains **20 refactoring opportunities** to address.
Please work through each issue systematically, ensuring tests pass after each change.

### Summary

**By Category:**
- duplication: 10
- maintainability: 10

**By Severity:**
- medium: 16
- high: 4

---

## Issues to Address

### 1. Code duplication in src/stores/backlog/actions-items.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 77 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/stores/backlog/actions-items.ts`

âœ… **Auto-fix available**

---

### 2. Large file detected: src/stores/backlog/actions-data.ts

**Category**: maintainability | **Severity**: medium | **Effort**: high

**Description**:
This file has 489 lines. Consider splitting it into smaller, more focused modules. Target: Keep files under 200 lines for better maintainability.

**Impact**:
Improves code organization, readability, and maintainability

**Files Affected**:
- `src/stores/backlog/actions-data.ts`

---

### 3. Code duplication in src/stores/backlog/actions-data.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 44 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/stores/backlog/actions-data.ts`

âœ… **Auto-fix available**

---

### 4. Magic numbers in src/stores/backlog/actions-data.ts

**Category**: maintainability | **Severity**: medium | **Effort**: low

**Description**:
Found 2 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/stores/backlog/actions-data.ts`

**Line Numbers**:
- src/stores/backlog/actions-data.ts: lines 248, 460

âœ… **Auto-fix available**

---

### 5. Large file detected: src/stores/item-store/index.ts

**Category**: maintainability | **Severity**: high | **Effort**: high

**Description**:
This file has 630 lines. Consider splitting it into smaller, more focused modules. Target: Keep files under 200 lines for better maintainability.

**Impact**:
Improves code organization, readability, and maintainability

**Files Affected**:
- `src/stores/item-store/index.ts`

---

### 6. Code duplication in src/stores/item-store/index.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 38 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/stores/item-store/index.ts`

âœ… **Auto-fix available**

---

### 7. Magic numbers in src/stores/item-store/index.ts

**Category**: maintainability | **Severity**: medium | **Effort**: low

**Description**:
Found 8 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/stores/item-store/index.ts`

**Line Numbers**:
- src/stores/item-store/index.ts: lines 96, 105, 177, 196, 353, 368, 368, 578

âœ… **Auto-fix available**

---

### 8. Code duplication in src/stores/item-store/grid-operations.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 16 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/stores/item-store/grid-operations.ts`

âœ… **Auto-fix available**

---

### 9. Code duplication in src/stores/item-store/default-data.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 142 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/stores/item-store/default-data.ts`

âœ… **Auto-fix available**

---

### 10. Magic numbers in src/stores/item-store/default-data.ts

**Category**: maintainability | **Severity**: high | **Effort**: medium

**Description**:
Found 24 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/stores/item-store/default-data.ts`

**Line Numbers**:
- src/stores/item-store/default-data.ts: lines 27, 33, 45, 45, 46, 46, 60, 66, 78, 79, 93, 99, 111, 111, 112, 126, 132, 144, 145, 159, 165, 165, 177, 178

âœ… **Auto-fix available**

---

### 11. Magic numbers in src/lib/utils/request-coalescer.ts

**Category**: maintainability | **Severity**: high | **Effort**: low

**Description**:
Found 4 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/lib/utils/request-coalescer.ts`

**Line Numbers**:
- src/lib/utils/request-coalescer.ts: lines 70, 72, 235, 237

âœ… **Auto-fix available**

---

### 12. Code duplication in src/lib/utils/error-simulator.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 26 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/lib/utils/error-simulator.ts`

âœ… **Auto-fix available**

---

### 13. Magic numbers in src/lib/utils/error-simulator.ts

**Category**: maintainability | **Severity**: medium | **Effort**: medium

**Description**:
Found 26 magic numbers that should be extracted to named constants. Suggested names: HTTP_STATUS_404, HTTP_STATUS_500, HTTP_STATUS_404

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/lib/utils/error-simulator.ts`

**Line Numbers**:
- src/lib/utils/error-simulator.ts: lines 72, 74, 112, 114, 118, 122, 126, 130, 134, 138, 162, 164, 168, 172, 176, 194, 194, 253, 254, 255, 259, 262, 273, 274, 275, 282

âœ… **Auto-fix available**

---

### 14. Code duplication in src/lib/storage/indexed-db-storage.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 29 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/lib/storage/indexed-db-storage.ts`

âœ… **Auto-fix available**

---

### 15. Code duplication in src/lib/particle-themes/theme-configs.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 120 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/lib/particle-themes/theme-configs.ts`

âœ… **Auto-fix available**

---

### 16. Magic numbers in src/lib/particle-themes/theme-configs.ts

**Category**: maintainability | **Severity**: high | **Effort**: medium

**Description**:
Found 52 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/lib/particle-themes/theme-configs.ts`

**Line Numbers**:
- src/lib/particle-themes/theme-configs.ts: lines 21, 22, 24, 34, 36, 39, 40, 41, 42, 57, 59, 60, 78, 79, 80, 81, 98, 99, 100, 101, 119, 120, 122, 133, 133, 135, 139, 140, 141, 142, 160, 161, 162, 163, 180, 181, 182, 183, 201, 202, 203, 204, 223, 224, 246, 246, 254, 254, 262, 262, 270, 270

âœ… **Auto-fix available**

---

### 17. Large file detected: src/lib/hooks/useLoadingStateMachine.ts

**Category**: maintainability | **Severity**: medium | **Effort**: high

**Description**:
This file has 437 lines. Consider splitting it into smaller, more focused modules. Target: Keep files under 200 lines for better maintainability.

**Impact**:
Improves code organization, readability, and maintainability

**Files Affected**:
- `src/lib/hooks/useLoadingStateMachine.ts`

---

### 18. Code duplication in src/lib/api/wiki-images.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 2 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/lib/api/wiki-images.ts`

âœ… **Auto-fix available**

---

### 19. Magic numbers in src/lib/api/wiki-images.ts

**Category**: maintainability | **Severity**: medium | **Effort**: low

**Description**:
Found 1 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/lib/api/wiki-images.ts`

**Line Numbers**:
- src/lib/api/wiki-images.ts: lines 70

âœ… **Auto-fix available**

---

### 20. Code duplication in src/lib/api/top-items.ts

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 8 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/lib/api/top-items.ts`

âœ… **Auto-fix available**

---

## Validation Checklist

- [ ] All 20 issues addressed
- [ ] Tests passing (`npm test`)
- [ ] Type checking passing (`npx tsc --noEmit`)
- [ ] No new linting errors
- [ ] Changes committed with descriptive messages

---

**Batch**: 3 of 6
**Total Issues**: 20
