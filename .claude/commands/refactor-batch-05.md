# Refactoring Batch 5 of 6

> **ðŸ“‹ REFACTORING REQUIREMENT FILE**
> Project: GOAT
> Issues in this batch: 20
> Generated by Vibeman RefactorWizard

---

## Overview

This batch contains **20 refactoring opportunities** to address.
Please work through each issue systematically, ensuring tests pass after each change.

### Summary

**By Category:**
- maintainability: 9
- code-quality: 4
- duplication: 7

**By Severity:**
- medium: 14
- high: 6

---

## Issues to Address

### 1. Magic numbers in src/app/api/top/groups/categories/[category]/route.ts

**Category**: maintainability | **Severity**: medium | **Effort**: low

**Description**:
Found 3 magic numbers that should be extracted to named constants. Suggested names: HTTP_STATUS_500, HTTP_STATUS_500, HTTP_STATUS_500

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/app/api/top/groups/categories/[category]/route.ts`

**Line Numbers**:
- src/app/api/top/groups/categories/[category]/route.ts: lines 57, 76, 109

âœ… **Auto-fix available**

---

### 2. Missing React Hook dependencies  (21 files)

**Category**: code-quality | **Severity**: high | **Effort**: low

**Description**:
This issue affects 21 files across the codebase. Found 6 hooks with missing dependencies. This can cause stale closures and bugs.

**Impact**:
Prevents bugs caused by stale closures

**Files Affected**:
- `src/providers/BacklogProvider.tsx`
- `src/components/app/ProgressMain.tsx`
- `src/components/app/landing/ListSelectionModal.tsx`
- `src/app/features/Collection/SimpleCollectionPanel.tsx`
- `src/app/features/Awards/AwardList.tsx`
- `src/app/features/Admin/ContextMenu.tsx`
- `src/app/features/matching/components/SwipeableCard.tsx`
- `src/app/features/Match/sub_MatchGrid/SimpleMatchGrid.tsx`
- `src/app/features/Match/sub_MatchCollections/SimpleDropZone.tsx`
- `src/app/features/Match/sub_MatchCollections/SimpleCollectionPanel.tsx`

âœ… **Auto-fix available**

---

### 3. Code duplication in src/components/page-transition.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 2 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/page-transition.tsx`

âœ… **Auto-fix available**

---

### 4. Code duplication in src/components/ui/stats-card.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 28 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/ui/stats-card.tsx`

âœ… **Auto-fix available**

---

### 5. Magic numbers in src/components/ui/stats-card.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: medium

**Description**:
Found 71 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/stats-card.tsx`

**Line Numbers**:
- src/components/ui/stats-card.tsx: lines 17, 18, 18, 18, 18, 18, 19, 45, 45, 45, 45, 45, 45, 51, 116, 116, 116, 116, 136, 145, 145, 145, 145, 145, 148, 148, 149, 149, 158, 158, 160, 160, 160, 160, 161, 161, 162, 170, 173, 173, 174, 174, 198, 199, 200, 201, 202, 203, 204, 207, 211, 213, 214, 221, 229, 237, 270, 318, 323, 346, 346, 347, 347, 348, 348, 348, 349, 349, 349, 374, 374

âœ… **Auto-fix available**

---

### 6. Magic numbers in src/components/ui/star-rating.tsx

**Category**: maintainability | **Severity**: high | **Effort**: medium

**Description**:
Found 52 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/star-rating.tsx`

**Line Numbers**:
- src/components/ui/star-rating.tsx: lines 39, 50, 50, 51, 51, 52, 52, 95, 103, 107, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 112, 121, 125, 126, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 137

âœ… **Auto-fix available**

---

### 7. Code duplication in src/components/ui/progressive-image.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 2 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/ui/progressive-image.tsx`

âœ… **Auto-fix available**

---

### 8. Magic numbers in src/components/ui/progressive-image.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: low

**Description**:
Found 6 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/progressive-image.tsx`

**Line Numbers**:
- src/components/ui/progressive-image.tsx: lines 53, 82, 99, 131, 135, 141

âœ… **Auto-fix available**

---

### 9. Magic numbers in src/components/ui/masonry-grid.tsx

**Category**: maintainability | **Severity**: high | **Effort**: medium

**Description**:
Found 12 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/masonry-grid.tsx`

**Line Numbers**:
- src/components/ui/masonry-grid.tsx: lines 54, 72, 72, 72, 88, 102, 137, 137, 137, 139, 141, 143

âœ… **Auto-fix available**

---

### 10. Missing React Hook dependencies in src/components/ui/masonry-grid.tsx

**Category**: code-quality | **Severity**: high | **Effort**: low

**Description**:
Found 1 hooks with missing dependencies. This can cause stale closures and bugs.

**Impact**:
Prevents bugs caused by stale closures

**Files Affected**:
- `src/components/ui/masonry-grid.tsx`

**Line Numbers**:
- src/components/ui/masonry-grid.tsx: lines 129

âœ… **Auto-fix available**

---

### 11. Code duplication in src/components/ui/list-grid.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 14 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/ui/list-grid.tsx`

âœ… **Auto-fix available**

---

### 12. Magic numbers in src/components/ui/list-grid.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: medium

**Description**:
Found 52 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/list-grid.tsx`

**Line Numbers**:
- src/components/ui/list-grid.tsx: lines 81, 84, 93, 98, 126, 126, 127, 127, 127, 127, 142, 142, 142, 142, 142, 149, 149, 155, 155, 155, 155, 155, 173, 173, 173, 173, 173, 180, 216, 216, 235, 235, 236, 236, 236, 236, 255, 255, 255, 255, 256, 257, 257, 275, 275, 276, 276, 280, 280, 280, 280, 280

âœ… **Auto-fix available**

---

### 13. Large file detected: src/components/ui/item-card.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: high

**Description**:
This file has 404 lines. Consider splitting it into smaller, more focused modules. Target: Keep files under 200 lines for better maintainability.

**Impact**:
Improves code organization, readability, and maintainability

**Files Affected**:
- `src/components/ui/item-card.tsx`

---

### 14. Code duplication in src/components/ui/item-card.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 35 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/ui/item-card.tsx`

âœ… **Auto-fix available**

---

### 15. Magic numbers in src/components/ui/item-card.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: medium

**Description**:
Found 49 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/components/ui/item-card.tsx`

**Line Numbers**:
- src/components/ui/item-card.tsx: lines 19, 19, 19, 19, 19, 20, 20, 21, 21, 21, 25, 35, 35, 35, 137, 137, 137, 137, 138, 138, 140, 140, 140, 141, 149, 149, 233, 245, 252, 265, 265, 279, 279, 279, 293, 293, 293, 303, 303, 303, 304, 314, 354, 355, 361, 361, 369, 392, 392

âœ… **Auto-fix available**

---

### 16. Code duplication in src/components/ui/context-menu.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 48 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/components/ui/context-menu.tsx`

âœ… **Auto-fix available**

---

### 17. Missing React Hook dependencies in src/components/theme/theme-provider.tsx

**Category**: code-quality | **Severity**: high | **Effort**: low

**Description**:
Found 1 hooks with missing dependencies. This can cause stale closures and bugs.

**Impact**:
Prevents bugs caused by stale closures

**Files Affected**:
- `src/components/theme/theme-provider.tsx`

**Line Numbers**:
- src/components/theme/theme-provider.tsx: lines 21

âœ… **Auto-fix available**

---

### 18. Code duplication in src/app/match-test/page.tsx

**Category**: duplication | **Severity**: medium | **Effort**: medium

**Description**:
Found 6 duplicated code blocks that could be extracted into reusable functions.

**Impact**:
Reduces code duplication and improves maintainability

**Files Affected**:
- `src/app/match-test/page.tsx`

âœ… **Auto-fix available**

---

### 19. Magic numbers in src/app/match-test/page.tsx

**Category**: maintainability | **Severity**: medium | **Effort**: medium

**Description**:
Found 33 magic numbers that should be extracted to named constants.

**Impact**:
Improves code maintainability and clarity

**Files Affected**:
- `src/app/match-test/page.tsx`

**Line Numbers**:
- src/app/match-test/page.tsx: lines 40, 135, 135, 135, 137, 137, 137, 137, 138, 147, 147, 147, 149, 149, 152, 152, 152, 164, 164, 164, 166, 166, 169, 169, 169, 199, 199, 199, 201, 201, 201, 201, 202

âœ… **Auto-fix available**

---

### 20. Missing React Hook dependencies in src/app/match-test/page.tsx

**Category**: code-quality | **Severity**: high | **Effort**: low

**Description**:
Found 1 hooks with missing dependencies. This can cause stale closures and bugs.

**Impact**:
Prevents bugs caused by stale closures

**Files Affected**:
- `src/app/match-test/page.tsx`

**Line Numbers**:
- src/app/match-test/page.tsx: lines 45

âœ… **Auto-fix available**

---

## Validation Checklist

- [ ] All 20 issues addressed
- [ ] Tests passing (`npm test`)
- [ ] Type checking passing (`npx tsc --noEmit`)
- [ ] No new linting errors
- [ ] Changes committed with descriptive messages

---

**Batch**: 5 of 6
**Total Issues**: 20
