You are an expert software engineer. Execute the following requirement immediately. Do not ask questions, do not wait for confirmation. Read the requirement carefully and implement all changes to the codebase as specified.

REQUIREMENT TO EXECUTE NOW:

# Swipe Stats Peek

## Metadata
- **Category**: functionality
- **Effort**: Medium (2/3)
- **Impact**: High (3/3)
- **Scan Type**: feature_scout
- **Generated**: 11/23/2025, 11:24:52 AM

## Description
Add a translucent overlay that appears during a left-to-right or right-to-left swipe, showing the item’s current average ranking and whether it’s already applied to the match grid. The overlay uses the existing `SwipeableCard` motion values and calculates stats on-the-fly from props, hiding the card from the list if applied.

## Reasoning
Users can immediately see the relevance of each card while swiping, reducing accidental selections and accelerating decision making. This visual cue ties ranking data directly into the swipe flow, delivering instant feedback with minimal UI changes.

## Context

**Note**: This section provides supporting architectural documentation and is NOT a hard requirement. Use it as guidance to understand existing code structure and maintain consistency.

### Context: Swipe Gesture System

**Description**: ## Overview

The matching feature provides a mobile-optimized swipeable card interface with advanced gesture detection, spring physics animations, and particle effects. This system enables Tinder-like swipe interactions for ranking and selection tasks, built on Framer Motion and custom gesture hooks.

## Key Capabilities

- **Gesture Detection**: Touch-based swipe detection with velocity, distance, and duration tracking for precise gesture recognition
- **Visual Feedback**: Real-time indicators (LIKE/NOPE), particle burst effects on swipe completion, and smooth spring-based animations with rotation and opacity transforms
- **Mobile Optimization**: Debounced swipe handling, multi-touch prevention, scroll blocking, and configurable thresholds for optimal mobile performance

## Architecture

### Component Breakdown

| Component/File | Purpose | Layer |
|----------------|---------|-------|
| `src/app/features/matching/components/SwipeableCard.tsx` | Main swipeable card component with Framer Motion animations and visual effects | UI |
| `src/app/features/matching/components/index.ts` | Component exports barrel file | UI |
| `src/hooks/useSwipeGesture.ts` | Core gesture detection hook with touch event handling and swipe calculation | Service |
| `src/hooks/useSwipeGesture.types.ts` | TypeScript types for swipe events, config, and callbacks | Data |

### Data Flow

1. **Touch Events**: User initiates touch on SwipeableCard
2. **Gesture Processing**: useSwipeGesture hook captures touchstart/touchmove/touchend events
3. **Calculation**: Hook calculates velocity, distance, duration, and determines swipe direction (left/right/up/down)
4. **Validation**: Swipe validated against thresholds (minDistance: 50px, maxDuration: 500ms, minVelocity: 0.3 px/ms)
5. **Callback Execution**: Valid swipes trigger onSwipe/onSwipeLeft/onSwipeRight callbacks
6. **Visual Effects**: SwipeableCard creates particle bursts and animates card off-screen
7. **State Reset**: Card returns to center position after animation completion

### Key Dependencies

- **External**: 
  - `framer-motion`: Spring physics animations, motion values, transforms
  - React hooks (useRef, useState, useCallback, useEffect)
- **Internal**: 
  - Custom `useSwipeGesture` hook for gesture detection
  - No dependencies on other feature contexts

## Technical Details

### State Management

The system uses local React state combined with Framer Motion motion values:

- **Motion Values**: `x`, `y` for position tracking (useMotionValue)
- **Transforms**: `rotate` (-25 to 25 deg), `opacity` (0.5 to 1) derived from x position
- **Component State**: `isSwiping` (boolean), `particles` (array), `swipeDirection` ('left'|'right'|null)
- **Ref State**: `touchStart`, `touchCurrent`, `isDebouncing`, `isSwiping` in useSwipeGesture

### Gesture Configuration

**Default Thresholds**:
- minDistance: 50px (minimum swipe length)
- maxDuration: 500ms (maximum swipe time)
- minVelocity: 0.3 px/ms (minimum speed)
- debounceMs: 300ms (delay between consecutive swipes)
- preventScroll: true (blocks browser scroll during horizontal swipes)

**Direction Detection**:
- Compares absolute deltaX vs deltaY to determine primary axis
- Horizontal: left (deltaX < 0) or right (deltaX > 0)
- Vertical: up (deltaY < 0) or down (deltaY > 0)

### Animation System

**Spring Physics**:
- stiffness: 300 (spring tension)
- damping: 30 (friction)
- Type: 'spring' for natural feel

**Swipe Animation**:
- Exit animation: 400px in swipe direction
- Duration: 0.3s with custom easing [0.32, 0.72, 0, 1]
- Auto-reset after 350ms

**Particle Effects**:
- 12 particles per swipe in radial burst pattern
- Colors: Green (#10b981, #34d399, #6ee7b7) for right swipe, Red (#ef4444, #f87171, #fca5a5) for left
- Animation: 100px radius, 0.5s duration with fade-out

### Visual Indicators

**NOPE Indicator (Left)**:
- Position: Left side, vertically centered
- Style: Red border (#ef4444), semi-transparent background, glow shadow
- Trigger: Shows when swipe deltaX < -30px

**LIKE Indicator (Right)**:
- Position: Right side, vertically centered
- Style: Green border (#10b981), semi-transparent background, glow shadow
- Trigger: Shows when swipe deltaX > 30px

### API Endpoints

None - this is a pure client-side UI feature

### Database Tables

None - no persistence layer
**Related Files**:
- `src/app/features/matching/components/SwipeableCard.tsx`
- `src/app/features/matching/components/index.ts`
- `src/hooks/useSwipeGesture.ts`
- `src/hooks/useSwipeGesture.types.ts`

**Post-Implementation**: After completing this requirement, evaluate if the context description or file paths need updates. Use the appropriate API/DB query to update the context if architectural changes were made.

## Recommended Skills

Use Claude Code skills as appropriate for implementation guidance. Check `.claude/skills/` directory for available skills.

## Notes

This requirement was created to fulfill a goal: **Item stats**

**Goal Description**: Collection items should display average ranking in each item and sort by default the items by this ranking asc
- Collection item should be hidden from the list if already applied in match grid

IMPORTANT INSTRUCTIONS:
- Analyze the requirement thoroughly
- Identify all files that need to be modified or created
- Implement all changes specified in the requirement
- Follow the implementation steps precisely
- Create/modify files as needed
- Run any tests if specified
- Ensure all changes are complete before finishing

## File Structure Guidelines (Next.js/React Projects)

When creating new files in Next.js/React projects, follow this structure:

**Feature-Specific Files** (use `app/features/<feature>` structure):
- `app/features/<feature>/components/` - Feature-specific components and UI sections
- `app/features/<feature>/lib/` - Feature-specific functions, utilities, and logical helpers
- `app/features/<feature>/` - Main wrapper, index, or page file for the feature

**Reusable UI Components** (use `app/components/ui` structure):
- `app/components/ui/` - Shared, reusable UI elements used across multiple features

**Theming and Styling**:
- Before creating new UI components, examine existing components in the project
- Match the color scheme, spacing, and visual patterns of existing components
- Use consistent className patterns (Tailwind CSS classes)
- Follow the app's design language (glassmorphism, gradients, shadows, etc.)
- Pay attention to dark mode support if the app uses it

Examples:
- Feature component: `app/features/tasks/components/TaskCard.tsx`
- Feature helper: `app/features/tasks/lib/taskValidation.ts`
- Reusable UI: `app/components/ui/Button.tsx`

## Test Coverage Preparation

**IMPORTANT**: For all interactive UI components (buttons, inputs, forms, modals, etc.), add `data-testid` attributes to enable automated testing.

**Guidelines**:
- Add `data-testid` to all clickable elements (buttons, links, icons)
- Use descriptive, kebab-case naming: `data-testid="submit-form-btn"`
- Include component context in the ID: `data-testid="goal-delete-btn"`, `data-testid="project-settings-modal"`
- Add to form inputs: `data-testid="email-input"`, `data-testid="password-input"`
- Add to list items for testing selection: `data-testid="task-item-123"`

**Examples**:
```tsx
<button onClick={handleSubmit} data-testid="create-goal-btn">
  Create Goal
</button>

<input
  type="text"
  value={title}
  onChange={handleChange}
  data-testid="goal-title-input"
/>

<div className="modal" data-testid="delete-confirmation-modal">
  ...
</div>
```

## Implementation Logging

**CRITICAL**: After completing the implementation, create a log entry using the implementation-log repository to track what was implemented.

Project ID: `4ee93a8c-9318-4497-b7cf-05027e48f12b`


**Use the Implementation Log Repository** (located at `src/app/db/repositories/implementation-log.repository.ts`):

```typescript
import { implementationLogRepository } from '@/app/db/repositories/implementation-log.repository';
import { v4 as uuidv4 } from 'uuid';

// Create log entry
implementationLogRepository.createLog({
  id: uuidv4(),
  project_id: '4ee93a8c-9318-4497-b7cf-05027e48f12b',
  requirement_name: '<requirement-name>',
  title: '<short-descriptive-title>',
  overview: '<detailed-overview-of-changes>',
  overview_bullets: '<bullet1>\n<bullet2>\n<bullet3>\n<bullet4>',
  tested: false
});
```

**Log Entry Guidelines**:
- `id`: Generate a unique UUID using `uuidv4()` or `crypto.randomUUID()`
- `project_id`: The project identifier (use: "4ee93a8c-9318-4497-b7cf-05027e48f12b")
- `requirement_name`: Name of the requirement file being executed (without .md extension)
- `title`: Short, descriptive title (2-6 words, e.g., "Add User Authentication")
- `overview`: Detailed paragraph describing:
  - What was implemented
  - Key files created or modified
  - Major functionality added
  - Any important patterns or decisions made
- `overview_bullets`: **REQUIRED** - Newline-separated bullet points (3-5 bullet points) summarizing key changes. Format as plain text with each bullet on a new line:
  - First bullet point describing main change
  - Second bullet point describing another key change
  - Third bullet point describing implementation detail
  - (Optional) Fourth bullet point for additional context
  Example: "Implemented OAuth 2.0 with PKCE flow\nAdded session management with refresh tokens\nCreated unified auth context provider\nMigrated from cookies to secure HTTP-only tokens"
- `tested`: Always set to false initially

**Example Log Entry**:

```typescript
import { implementationLogRepository } from '@/app/db/repositories/implementation-log.repository';
import { v4 as uuidv4 } from 'uuid';

implementationLogRepository.createLog({
  id: uuidv4(),
  project_id: 'project-abc-123',
  requirement_name: 'implement-user-login',
  title: 'User Login System',
  overview: 'Implemented complete user authentication system with login form, JWT token management, and session persistence. Created LoginForm.tsx component, authService.ts for API calls, and useAuth hook for state management. Added protected route wrapper and login/logout functionality. Integrated with existing theme using glassmorphism design.',
  overview_bullets: 'Implemented OAuth 2.0 with PKCE flow
Added session management with refresh tokens
Created unified auth context provider
Integrated with existing glassmorphism theme',
  tested: false
});
```

**IMPORTANT**: Do NOT create standalone script files for logging. Use the repository directly in your implementation or create a simple inline script that imports and uses the repository




## Final Checklist

Before finishing:
- [ ] All code changes implemented
- [ ] Test IDs added to interactive components
- [ ] File structure follows guidelines
- [ ] UI components match existing theme
- [ ] Implementation log entry created in database
- [ ] Tests run successfully (if specified)

Begin implementation now.